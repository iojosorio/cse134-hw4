<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Contact Information</title>
    <link rel="stylesheet" href="main.css">
    <link rel="icon" href="./_icons/pikachu.ico">
    <noscript>
        <style>
            .theme-select {
                display: none;
            }
        </style>
    </noscript>
    <style> 
        table {
            border-collapse: collapse;
            width: 100%;
            td {
                border: 2px solid var(--header-background-color);
                text-align: center;
            }
            th {
                background-color: var(--header-background-color);
                border: 2px solid var(--header-background-color);
                color: var(--main-text-color-hover);
            }
        }
        form {
            display: flex;
            flex-direction: column;
        }
        form-field {
            display: flex;
            width: 50%;
            flex-direction: column;
        }
        input, select, textarea {
            border: 2px solid black;
            background-color: white;
            color: black;
            outline: 2px solid black;
            &:focus {
                border: 2px solid aqua;
                background-color: black;
                color: white;
                outline: 2px solid blue;
                transform: scale(1.01);
                transition: all 0.3s ease-in;
            }
        }
        textarea {
            height: 10rem !important;
            width: 100% !important; 
        }
        output {
            font-size: var(--font-size);
            width : 100%;
        }
        .flash {
            animation: flash 1s ease-in-out 3 alternate;
        }
        @keyframes flash {
            0% { background-color: var(--background-color); color: var(--main-text-color); }
            100% { background-color: var(--header-background-color); color: var(--main-text-color-hover); }
        }
    </style>
    <script>
        document.querySelectorAll('.theme-select').forEach(el => el.style.display = '');
    </script>
    <!-- Google tag (gtag.js) -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-R7NVQ9LH53"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'G-R7NVQ9LH53');
  </script>
  <script src="https://cdn.lgrckt-in.com/LogRocket.min.js" crossorigin="anonymous"></script>
  <script>window.LogRocket && window.LogRocket.init('tazwew/indominusspace');</script>
  <script src="./collector.js"></script>
</head>

<body>
    <header>
        <h1>Contact Information</h1>
        <nav>
            <a href="index.html">Home</a>
            <a href="_about.html">About Me</a>
            <a href="_contact.html">Contact Me</a>
            <a href="_experience.html">Experience</a>
        </nav>
        <br>
        <label for="theme-toggle" class="theme-select">Toggle Theme:</label>
        <select id="theme-toggle" class="theme-select">
            <option value="default">Default</option>
            <option value="light">Light</option>
            <option value="dark">Dark</option>
        </select>
        <script>
            let _themeToggle = document.getElementById('theme-toggle');
            _themeToggle.addEventListener('change', function() {
                document.documentElement.className = this.value;
                localStorage.setItem('theme', this.value);
            });

            let savedTheme = localStorage.getItem('theme');
            if (savedTheme) {
                document.documentElement.className = savedTheme;
                document.getElementById('theme-toggle').value = savedTheme;
            }
        </script>
    </header>
    <main>
        <section>
            <h2>Contact Details</h2>
            <p>Feel free to reach out to me using the information below.</p>
            <address>
                Jonathan Osorio <br>
                jonathannoj0186@gmail.com <br>
                @josorio.io <br>
                619.885.6584
            </address>
        </section>
        <section>
            <h2>Availability</h2>
            <p>The table below shows my availability throughout the week.</p>
            <table>
                <caption>This week's schedule.</caption>
                <tr>
                    <th>Sun</th>
                    <th>Mon</th>
                    <th>Tues</th>
                    <th>Wed</th>
                    <th>Thurs</th>
                    <th>Fri</th>
                    <th>Sat</th>
                </tr>
                <tr>
                    <td>not busy</td>
                    <td>busy</td>
                    <td>busy</td>
                    <td>busy</td>
                    <td>busy</td>
                    <td>busy</td>
                    <td>not busy</td>
                </tr>
            </table>
        </section>
        <section>
            <h2>Contact Form</h2>
            <p>Please fill out the form below to get in touch with me.</p>
            <form action="https://httpbin.org/post" method="post">
                <fieldset>
                    <legend>Personal Information</legend>
                    <form-field>
                        <label for="name" class="required"> (*)Name: </label> 
                        <input type="text" name="name" id="name" pattern="[A-Za-z\s]+" required> 
                        <my-output>
                            <output id="info"></output>
                            <output id="error"></output>
                        </my-output>
                    </form-field>
                    <form-field>
                        <label for="phone"> Phone number: </label> 
                        <input type="tel" name="phone" id="phone" autocomplete="on"> 
                    </form-field>
                    <form-field>
                       <label for="email" class="required"> (*)Email: </label> 
                        <input type="email" name="email" id="email" required>              
                    </form-field>
                </fieldset>
                <fieldset>
                    <legend>Availability</legend>
                    <form-field>
                        <label for="day">Choose a day:</label>
                        <select name="day" id="day">
                            <optgroup label="Weekdays">
                                <option value="mon">Monday</option>
                                <option value="tue">Tuesday</option>
                                <option value="wed">Wednesday</option>
                                <option value="thu">Thursday</option>
                                <option value="fri">Friday</option>
                            </optgroup>
                            <optgroup label="Weekends">
                                <option value="sat">Saturday</option>
                                <option value="sun">Sunday</option>
                            </optgroup>
                        </select>
                    </form-field>
                    <form-field>
                        <label for="time">Enter a time.</label>
                        <input list="time-categories" name="time" id="time">
                        <datalist id="time-categories">
                            <option value="Morning"></option>
                            <option value="Noon"></option>
                            <option value="Afternoon"></option>
                            <option value="Evening"></option>
                        </datalist>
                    </form-field>
                </fieldset>
                <fieldset>
                    <legend>Comments</legend>
                    <label for="comments">Comments:</label>
                    <textarea name="comments" id="comments" maxlength="300"></textarea>
                    <output id="counter">300 characters remaining</output>
                </fieldset>
                <input type="hidden" name="possible_bot" value="true">
                <input type="hidden" name="form-errors" id="form-errors">
                <button type="submit">Submit</button>
            </form>
            <script>
                let form_errors = [];

                let form = document.querySelector('form');
                let formErrorsInput = document.getElementById('form-errors');

                let _name = document.getElementById('name');
                let _error = document.getElementById('error');
                let nameRegex = /^[A-Za-z\s]+$/;
                _name.addEventListener('input', function () {
                    _name.setCustomValidity('');
                    if (!nameRegex.test(_name.value)) {
                        _name.setCustomValidity('Invalid characters in name. Please use only letters and spaces.');
                        _name.classList.add('error');
                        _error.textContent = 'Invalid characters in name. Please use only letters and spaces.';
                        
                        form_errors.push({
                            field: 'name',
                            value: _name.value,
                            message: 'Invalid characters in name. Please use only letters and spaces.',
                        });

                        _error.classList.remove('flash');
                        _error.classList.add('flash');

                        setTimeout(() => {
                            _error.textContent = '';
                            _name.classList.remove('error');
                            _error.classList.remove('flash');
                        }, 3000);
                    } else {
                        _error.textContent = '';
                        _name.classList.remove('error');
                        _error.classList.remove('flash');
                    }
                });

                let _email = document.getElementById('email');
                _email.addEventListener('input', function () {
                    _email.setCustomValidity('');
                    if (!_email.checkValidity()) {
                        _email.setCustomValidity('Please enter a valid email address. A valid email address must contain an "@" symbol.');
                        form_errors.push({
                            field: 'email',
                            value: _email.value,
                            message: 'Invalid email address format.',
                        });
                    }
                });

                let textarea = document.getElementById('comments');
                let counter = document.getElementById('counter');
                let limit = 300;
                textarea.addEventListener('input', function () {
                    let remaining = limit - textarea.value.length;
                    counter.textContent = `${remaining} characters remaining`;
                    if(0 <= remaining && remaining < 60) {
                        textarea.style.border = '2px solid red';
                    } else if (60 <= remaining && remaining < 120) {
                        textarea.style.border = '2px solid lightcoral';
                    } else if (120 <= remaining && remaining < 180) {
                        textarea.style.border = '2px solid white';
                    } else if (180 <= remaining && remaining < 240) {
                        textarea.style.border = '2px solid lightblue';
                    } else {
                        textarea.style.border = '2px solid aqua';
                    }
                });
                textarea.addEventListener('focus', function () {
                    textarea.style.border = '2px solid aqua';
                    textarea.style.backgroundColor = 'black';
                    textarea.style.color = 'white';
                    textarea.style.transform = 'scale(1.01)';
                    textarea.style.transition = 'all 0.3s ease-in';
                });
                textarea.addEventListener('blur', function () {
                    textarea.style.border = '2px solid black';
                    textarea.style.backgroundColor = 'white';
                    textarea.style.color = 'black';
                    textarea.style.transform = 'scale(1)';
                    textarea.style.transition = 'all 0.3s ease-in';
                });
                form.addEventListener('submit', function (e) {
                    formErrorsInput.value = JSON.stringify(form_errors);
                });
            </script>
        </section>
    </main>
    <footer>
        <address>
            Jonathan Osorio <br>
            jonathannoj0186@gmail.com <br>
            619.885.6584
        </address>
    </footer>
</body>
</html> 
